<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tela Usuario</title>
    <link rel="stylesheet" href="css/menuLateral.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/script.js"></script>
</head>

<body>
    <div class="sidebar">
        <nav class="menu-lateral" id="menu-lateral">

            <div class="expandir">
                <i class="bi bi-list" onclick="expandir()"></i>
            </div>

            <ul class="menu">
                <li class="item-menu ativo" onclick="mudarContainer('#')">
                    <i class="bi bi-person icone"></i>
                    <span class="txt-link">
                        Usuário
                    </span>
                </li>

                <li class="item-menu" onclick="mudarContainer('#grafMax')">
                    <span class="icone">
                        <i class="bi bi-columns-gap"></i>
                    </span>
                    <span class="txt-link">
                        Geral
                    </span>
                </li>

                <li class="item-menu" onclick="mudarContainer('#grafCard')">
                    <span class="icone">
                        <i class="bi bi-pc-display"></i>
                    </span>
                    <span class="txt-link">
                        Informações
                    </span>
                </li>

                <li class="item-menu" onclick="mudarContainer('#grafMin')">
                    <span class="icone">
                        <i class="bi bi-speedometer2"></i>
                    </span>
                    <span class="txt-link">
                        Dashboard
                    </span>
                </li>

                <li class="item-menu" onclick="mudarContainer('#grafMin')">
                    <span class="icone">
                        <i class="bi bi-box-arrow-left"></i>
                    </span>
                    <span class="txt-link">
                        sair
                    </span>
                </li>

            </ul>
        </nav>
    </div>
    <div class="conteudo">

        <div class="container">

            <div class="conteudo_user" id="conteudo_user">

                <div class="btns_user">

                    <div class="botao_user border-azul"
                        onclick="mudarTelaUser('conteudo_user_perfil', 'conteudo_user')">
                        <label for="html">INFORMAÇÕES DA CONTA</label>
                    </div>

                    <div class="botao_user border-vermelho"
                        onclick="mudarTelaUser('conteudo_user_usuario', 'conteudo_user')">
                        <label for="html">CADASTRAR
                            USUÁRIO</label>
                    </div>

                    <div class="botao_user border-branco"
                        onclick="mudarTelaUser('conteudo_user_computador', 'conteudo_user')">
                        <label for="html">CADASTRAR
                            MÁQUINA</label>
                    </div>

                </div>

                <div class="tabela_user">

                    <div class="header_tabela">

                        <div class="radio-container">

                            <label for="radio" class="radio_label">
                                <input type="radio" id="radio" name="radio_user" />
                                <div class="custom-radio">
                                    <span></span>
                                </div>
                                <span>Computadores</span>
                            </label>

                        </div>

                        <div class="radio-container">

                            <label for="radio1" class="radio_label">
                                <input type="radio" id="radio1" name="radio_user" />
                                <div class="custom-radio">
                                    <span></span>
                                </div>
                                <span>Usuarios</span>
                            </label>

                        </div>

                    </div>

                    <div class="tabela_usuario">

                    </div>
                </div>
            </div>



            <div class="conteudo_user usuario" style="display: none;" id="conteudo_user_usuario">

                <div class="btns_user">

                    <div class="div_input_cad_user">
                        <label for="html">Nome</label>
                        <input type="text" class="input_user_cad">
                    </div>

                    <div class="div_input_cad_user">
                        <label for="html">E-mail</label>
                        <input type="text" class="input_user_cad">
                    </div>

                    <div class="div_input_cad_user">
                        <label for="html">Senha</label>
                        <input type="text" class="input_user_cad">
                    </div>

                    <div class="div_input_cad_user">
                        <label for="html">Confirmar senha</label>
                        <input type="text" class="input_user_cad">
                    </div>

                    <div class="div_input_cad_user div_input_cad_user_btn">
                        <button class="input_user_cad_btn btn_verm"
                            onclick="mudarTelaUser('conteudo_user', 'conteudo_user_usuario')">Voltar</button>
                        <button class="input_user_cad_btn btn_azul">Cadastrar</button>
                    </div>

                </div>

                <div class="tabela_user">

                    <div class="header_tabela">
                        <label for="jsdelivr" class="border-branco" style="font-size: 30px;">Usuários
                            cadastrados</label>
                    </div>

                    <div class="tabela_usuario">

                    </div>
                </div>

            </div>


            <div class="conteudo_user computador" id="conteudo_user_computador">

                <div class="btns_user">

                    <div class="div_input_cad_user">
                        <label for="html">Nome</label>
                        <input type="text" class="input_user_cad">
                    </div>

                    <div class="div_input_cad_user">
                        <label for="html">Área</label>
                        <input type="text" class="input_user_cad">
                    </div>

                    <div class="div_input_cad_user div_input_cad_user_btn">
                        <button class="input_user_cad_btn btn_verm"
                            onclick="mudarTelaUser('conteudo_user', 'conteudo_user_computador')">Voltar</button>
                        <button class="input_user_cad_btn btn_azul">Cadastrar</button>
                    </div>

                </div>

                <div class="tabela_user">

                    <div class="header_tabela">
                        <label for="jsdelivr" class="border-branco" style="font-size: 30px;">Máquinas
                            cadastradas</label>
                    </div>

                    <div class="tabela_usuario">

                    </div>
                </div>

            </div>

            <div class="conteudo_user perfil" id="conteudo_user_perfil">

                <div class="header_perfil">
                    <div>
                        <p>Aldemir De Barros</p>
                    </div>
                    <div>
                        <img src="img/usuario-de-perfil.png" class="img_perfil" alt="">
                    </div>
                </div>


                <div class="carousel_div">

                    <div id="carouselExample" class="carousel slide">
                        <div class="carousel-inner">
                            <div class="carousel-item active">



                                <div class="campos_perfil">

                                    <div class="div_campos_perfil">
                                        <div class="div_input_cad_user">
                                            <label>Empresa</label>
                                            <input type="text" class="input_user_cad">
                                        </div>

                                        <div class="div_input_cad_user">
                                            <label>CNPJ</label>
                                            <input type="text" class="input_user_cad">
                                        </div>
                                    </div>

                                    <div class="div_campos_perfil">

                                        <div class="div_input_cad_user">
                                            <label>Email</label>
                                            <input type="text" class="input_user_cad">
                                        </div>

                                        <div class="div_input_cad_user">
                                            <label>Senha</label>
                                            <input type="text" class="input_user_cad">
                                        </div>

                                    </div>

                                    <div class="div_btns_perfil">
                                        <button class="input_user_cad btn_verm"
                                            onclick="mudarTelaUser('conteudo_user', 'conteudo_user_perfil')">Voltar</button>
                                        <button class="input_user_cad btn_azul"
                                            style="background-color: #457b9d7e;">Alterações</button>
                                    </div>
                                </div>

                            </div>


                            <div class="carousel-item">


                                <div class="campos_perfil">

                                    <div class="div_campos_perfil_end">
                                        <div class="div_input_cad_user">
                                            <label>CEP</label>
                                            <input type="text" class="input_user_cad">
                                        </div>

                                        <div class="div_input_cad_user">
                                            <label>Rua</label>
                                            <input type="text" class="input_user_cad">
                                        </div>

                                        <div class="div_input_cad_user">
                                            <label>Bairro</label>
                                            <input type="text" class="input_user_cad">
                                        </div>
                                    </div>

                                    <div class="div_campos_perfil_end">

                                        <div class="div_input_cad_user">
                                            <label>Cidade</label>
                                            <input type="text" class="input_user_cad">
                                        </div>

                                        <div class="div_input_cad_user">
                                            <label>Estado</label>
                                            <input type="text" class="input_user_cad">
                                        </div>

                                        <div class="div_input_cad_user">
                                            <label>Complemento</label>
                                            <input type="text" class="input_user_cad">
                                        </div>
                                    </div>

                                    <div class="div_btns_perfil">
                                        <button class="input_user_cad btn_verm"
                                            onclick="mudarTelaUser('conteudo_user', 'conteudo_user_perfil')">Voltar</button>
                                        <div class="div_input_cad_user">
                                            <label>Complemento</label>
                                            <input type="text" class="input_user_cad">
                                        </div>
                                        <button class="input_user_cad btn_azul"
                                            style="background-color: #457b9d7e;">Alterações</button>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                    <button class="carousel-control-prev seta" type="button" data-bs-target="#carouselExample"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon " aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next seta" type="button" data-bs-target="#carouselExample"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>

            </div>






        </div>

        <div class="container grafMax" id="grafMax">
            <div class="div_geral_kpi">
                <div class="div_coluna_kpi">
                    <div class="kpi">
                        <p> Computadores Ativos</p>
                        <span>5</span>
                    </div>

                    <div class="kpi">
                        <p>Sistema Operacional Linux</p>
                        <span>5</span>
                    </div>

                    <div class="kpi">
                        <div>
                            <input type="number" id="inpt_porc_armazem" class="inpt_limite">
                            <p>% ou mais de<br>armazenamento disponível</p>
                        </div>
                        <span>5</span>
                    </div>
                </div>

                <div class="div_coluna_kpi">
                    <div class="kpi">
                        <p>Todos os Computadores</p>
                        <span>5</span>
                    </div>

                    <div class="kpi">
                        <p>Sistema Operacional Windows</p>
                        <span>5</span>
                    </div>

                    <div class="kpi">
                        <div>
                            <input type="number" id="inpt_memoria_disp" class="inpt_limite">
                            <p>gb ou mais de Memória disponível</p>
                        </div>
                        <span>5</span>
                    </div>
                </div>
            </div>

            <div class="tabela_max">

            </div>
        </div>

        <div class="container grafCard" id="grafCard">

            <div class="header_cards_grafico">
                <p>INFORMAÇÕES COMPUTADOR</p>
                <select name="slct_infos_comp_cards" class="select_card" id="">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>

            <div class="div_linha_cards" style="justify-content: space-evenly;">
                <div class="cards">
                    <div class="titulo_card">
                        <p>RAM</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Threads</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Processos Ativos</p>
                    </div>
                </div>
                <div class="cards">
                    <div class="titulo_card">
                        <p>REDE</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Threads</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Processos Ativos</p>
                    </div>
                </div>
            </div>

            <div class="div_linha_cards">
                <div class="cards">
                    <div class="titulo_card">
                        <p>DISCO</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Threads</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Processos Ativos</p>
                    </div>
                </div>
                <div class="cards">
                    <div class="titulo_card">
                        <p>SISTEMA</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Threads</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Processos Ativos</p>
                    </div>
                </div>
                <div class="cards">
                    <div class="titulo_card">
                        <p>SERVIÇO</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Threads</p>
                    </div>
                    <div class="div_coluna_componentes">
                        <span>10</span>
                        <p>Total de Processos Ativos</p>
                    </div>
                </div>
            </div>

        </div>


        <div class="container grafMin" id="grafMin">
            <div class="header_cards_grafico">
                <p>DADOS COMPUTADOR</p>
                <select name="slct_infos_comp_cards" class="select_card" id="">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>

            <div class="div_graficos_corpo">
                <div class="div_graficos_geral">
                    <div class="div_colunas_graficos">
                        <div class="div_grafico">
                            <div class="header_grafico">
                                <p>Uso da CPU X Tempo</p>
                                <div class="div_limite_componentes">
                                    <img src="img/icone/Error.png" alt="">
                                    <input type="number" class="inpt_limite" oninput="duplica(this.id)"
                                        id="input_limite_CPU">
                                </div>
                            </div>
                            <div class="grafico">
                                <canvas id="grafico_CPU" class="cnvs"></canvas>

                            </div>
                        </div>
                        <div class="div_grafico">
                            <div class="header_grafico">
                                <p>Uso de disco X Tempo</p>
                                <div class="div_limite_componentes">
                                    <img src="img/icone/Error.png" alt="">
                                    <input type="number" class="inpt_limite" oninput="duplica(this.id)"
                                        id="input_limite_DISCO">
                                </div>
                            </div>
                            <div class="grafico">
                                <canvas id="grafico_DISCO" class="cnvs"></canvas>

                            </div>
                        </div>
                    </div>
                    <div class="div_colunas_graficos">
                        <div class="div_grafico">
                            <div class="header_grafico">
                                <p>Uso da RAM X Tempo</p>
                                <div class="div_limite_componentes">
                                    <img src="img/icone/Error.png" alt="">
                                    <input type="number" class="inpt_limite" oninput="duplica(this.id)"
                                        id="input_limite_RAM">
                                </div>
                            </div>
                            <div class="grafico">
                                <canvas id="grafico_RAM" class="cnvs"></canvas>
                            </div>
                        </div>
                        <div class="div_grafico">
                            <div class="header_grafico">
                                <p>Velocidade rede X Tempo</p>
                                <div class="div_limite_componentes">
                                    <img src="img/icone/Error.png" alt="">
                                    <input type="number" class="inpt_limite" oninput="duplica(this.id)"
                                        id="input_limite_REDE">
                                </div>
                            </div>
                            <div class="grafico">
                                <canvas id="grafico_REDE" class="cnvs"></canvas>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="div_kpi_grafico_geral">
                    <div class="div_kpi_grafico">
                        <div class="kpi_grafico">
                            <div class="kpi_graf">

                            </div>
                            <div class="kpi_graf">

                            </div>
                            <div class="kpi_graf">

                            </div>
                        </div>
                        <div class="div_kpi_incidente_grafico">
                            <p>Incidentes registrados nos ultimos 30 dias</p>
                            <div class="incidente_graf">

                            </div>
                        </div>
                    </div>
                    <div class="div_tabela_processos">

                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>

</html>

<script>

    var graficos = ['grafico_CPU', 'grafico_DISCO', 'grafico_RAM', 'grafico_REDE'];
    var labe = ['CPU', 'DISCO', 'RAM', 'REDE'];
    var cor = ['#EDF2F4', '#A8DADC', '#457B9D', '#EDF2F4']

    var Limite = {};
    Limite.CPU = 75;
    Limite.RAM = 75;
    Limite.REDE = 75;
    Limite.DISCO = 75;

    console.log(Limite);

    window.onload = plotar();


    function duplica(idAtu) {
        const codigomaterial = document.getElementById(idAtu).value;

        if (codigomaterial > 100 || codigomaterial < 0) {
            const codigoalterado = codigomaterial.normalize('NFD').replace(/([\u0300-\u036f]|[^_0-9a-zA-Z\s])/g, '').replace(/ /g, "_").toLowerCase().substring(0, 2);
            document.getElementById(idAtu).value = codigoalterado;
        }
        mudarLimite(idAtu)
    };

    function mudarLimite(id) {
        let valor = document.getElementById(id).value

        let comp = id.slice((id.lastIndexOf("_") + 1), id.length)
        Limite[comp] = Number(valor);

        console.log(Limite);

    }

    function plotar() {
        for (let i = 0; i <= 3; i++) {
            var graficoAtual = graficos[i];
            var labelAtual = labe[i];
            var corAtual = cor[i]
            plotarGrafico(graficoAtual, labelAtual, corAtual)

        }
    }
    var labels = [];
    var data = [];
    var data2 = [];
    function plotarGrafico(grafico, lab, color_border) {


        labels = [1, 2, 3, 4, 5];
        data = [];
        data2 = [];
        let comp = grafico.slice((grafico.indexOf("_") + 1), grafico.length)
        for (let i = 0; i <= 4; i++) {
            var num = Math.floor(Math.random() * 100);
            data.push(num);
            data2.push(Limite[comp])
            // data[1].push(num2);
        }
        let dados = {
            labels: labels,
            datasets: [
                {
                    label: 'lab',
                    data: data,
                    fill: false,
                    borderColor: (color_border),
                },
                {
                    label: 'Limite',
                    data: data2,
                    fill: true,
                    borderColor: 'rgb(75, 192, 192)',
                    backgroundColor: ('#00000000'),
                    borderColor: ('#E63946'),
                }
            ],

        };


        const config = {
            type: 'line',
            data: dados,
            options: {
                scales: {
                    beginAtZero: true
                },
                plugins: {
                    legend: {
                        display: false,
                    }
                }
            }

        };

        let myChart = new Chart(
            document.getElementById(grafico),
            config
        );

        setTimeout(() => atualizarGrafico(data, data2, myChart, labels, comp), 5000);

    }

    function atualizarGrafico(dados, dados2, myChart, labels, comp) {


        myChart.data.labels.shift(); // apagar o primeiro
        myChart.data.labels.push(myChart.data.labels.length + 2); // incluir um novo momento

        var medidaAtual = Math.floor(Math.random() * 100);

        myChart.data.datasets[0].data.shift();  // apagar o primeiro de temperatura
        myChart.data.datasets[0].data.push(medidaAtual);

        myChart.data.datasets[1].data.shift();  // apagar o primeiro de temperatura
        myChart.data.datasets[1].data.push(Limite[comp]);

        myChart.update();


        setTimeout(() => atualizarGrafico(data, data2, myChart, labels, comp), 5000);
    }

    var menuItem = document.querySelectorAll('.item-menu')

    function selectLink() {
        menuItem.forEach((item) =>
            item.classList.remove('ativo')
        )
        this.classList.add('ativo')
    }

    menuItem.forEach((item) =>
        item.addEventListener('click', selectLink)
    )


    function expandir() {



        div1 = document.getElementById('menu-lateral');
        txtLink = document.getElementsByClassName('txt-link')

        if (div1.style.width == '100px') {
            div1.style.width = '270px';
            // txtLink.style.display = "none";
            $('.txt-link').css('display', 'block');
        } else {
            div1.style.width = '100px'
            txtLink.style.display = "block";

        }

        // item1.


        /* .menu li.item-menu:hover a{
    color: #EDF2F4;
    transition: .4s;
} */
        /* nav.menu-lateral:hover{
                    min-width: 270px;
                    padding-left: 20px;
                } */
        /* nav.menu-lateral:hover .txt-link{
            display: block;
        } */



    }

    function mudarContainer(pg) {
        // alert(`#${pg}`)
        // alert('1as1')
        document.location.href = `${pg}`
    }


    function mudarTelaUser(tela, telaS) {
        elemento = document.getElementById(tela)
        elemento2 = document.getElementById(telaS)

        elemento2.style.animation = 'sumir .4s linear'

        setTimeout(function () {
            elemento.style.animation = 'sumir .4s linear reverse '

            elemento.style.display = 'flex'
            elemento2.style.display = 'none'
        }, 400)

        setTimeout(function () {
            elemento.style.animation = null;
            elemento2.style.animation = null;
        }, 800);

    }
</script>